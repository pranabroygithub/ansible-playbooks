---
- name: installing mysql server
  hosts: pranab_ansible_ec2
  gather_facts: false
  vars:
  - version-number: 3
  become: true
  tasks:
  - name: updating all packages
    yum: 
     name: "*"
     state: latest
  - name: Downloading the package
    get_url:
     url: https://repo.mysql.com/mysql80-community-release-el6-{version-number}.noarch.rpm
     dest: /usr/local
  - name: installing the downloaded packages
    yum:
     name: /usr/local/mysql80-community-release-el6-{version-number}.noarch.rpm
     state: present
  - name: disabling default mysql module
    command: sudo yum module disable mysql
  - name: installing mysql-community-server
    yum:
     name: mysql-community-server
     state: present
  - name: start the mysql mysql-server
    service:
     name: mysqld
     state: started